<!doctype html>

<html>
<head>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/nav.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
    <link href="css/buysell.css" rel="stylesheet">
    <link href="css/listings.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="js/nav.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
    <style>
        img {
            float: left;
            width:12vh;
            height:12vh;
            margin-top:2vh;
            margin-right:2vh;
            margin-left:1vh; 

        }
    </style>

</head>
<body>
    <nav class="navbar navbar-inverse navbar-fixed-top"></nav>
    {{#each this}}
    <a class="card border-primary mb-3" href="/listing-{{type}}-{{name}}">
      <div class="card-body" href="/search">
        {{#if image}}
        <img src="{{image}}"> 
        {{/if}}
        <p class="card-title">{{name}}</p>
        <p class="card-text text-muted">{{description}}</p>
        <div class="d-inline">{{location}}</div>
        <div class="d-inline pull-right">${{price}}</div>
      </div>
    </a>
    {{/each}}
    <nav class="navbar navbar-inverse navbar-fixed-bottom">
        <ul class="nav navbar-nav">
          <li class="active"><a href="search"><i class="fa fa-search"></i></a></li>
          <li><a href="addListing"><i class="fa fa-plus"></i></a></li>
          <li><a href="profile"><i class="fa fa-user"></i></a></li>
        </ul>
    </nav>   
</body>

<script type="text/javascript">
    let x = document.getElementsByClassName("card-text");

    for (var i = 0; i < x.length; i++) { 
        if (x[i].innerText.length > 120) {
     
            x[i].innerText = x[i].innerText.substring(0,100) + '...';
        }
    }

    let cards = document.getElementsByClassName("card");
    let b = document.getElementsByTagName('body');
    let cl = cards.length;
    for (var i = 0; i < cl; i++) {
        let l = cards[i].children[0].children[2].innerText;
        if(l.length < 1) {
            cards[i].parentNode.removeChild(cards[i]);
            i--;
        }
    }

</script>
</html>
